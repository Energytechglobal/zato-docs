
Hot-deployment from an IDE
--------------------------

Since release 3.0, Zato supports a special endpoint that allows you to deploy
Python modules loaded in one of several supported Integrated Development
Environments directly to a Zato cluster, enabling faster develop/test cycles
when prototyping services.


Supported Environments
======================

Visual Studio Code
~~~~~~~~~~~~~~~~~~

The `Zato for Visual Studio Code plug-in <https://marketplace.visualstudio.com/items?itemName=zatosource.ide-vs-code>`_
available from the Visual Studio marketplace adds a default keybinding along
with a toolbar button enabling one-click deployment to your development
cluster.

.. image:: ../gfx/progguide/ide-deploy-vscode-hot-deploy.png

Please visit the extensions gallery in Visual Studio code (by pressing
ctrl-shift-X) and search for "zato" for further instructions on how to install
this plug-in.


PyCharm
~~~~~~~

The `XXX for YYY plug-in <https://www.google.com/>`_ available from ZZZ adds
...



Zato 3.x Configuration
======================

In a newly installed Zato 3.x cluster, the IDE deployment service and channel
are preconfigured and associated with an RBAC role. A default HTTP Basic Auth
credential, ``ide_publisher``, is created with a randomly assigned password
and assigned to the RBAC role.

In order to make use of IDE deployment in Zato 3.0, it is only necessary to
reset the password for this default account. If you prefer, you may create a
new Basic Auth credential and assocate it with the **IDE Publishers** RBAC
role instead.

To reset the ``ide_publisher`` password, first visit the **Security -> HTTP
Basic Auth** section of the administration UI for your cluster:

.. image:: ../gfx/progguide/ide-deploy-basic-auth.png

Select the **Change password** option for the pre-installed ``ide_publisher``
credential:

.. image:: ../gfx/progguide/ide-deploy-change-password.png

Set the password to something meaningful, and choose **OK**.




Zato 2.x Configuration
======================

For Zato 2.0.x and older clusters, it is still possible to use the
hot-deployment endpoint, but it must be configured manually.

Upload the service
~~~~~~~~~~~~~~~~~~

1. To configure the endpoint, download the service source file from the
   `zato-labs GitHub repository <https://github.com/zatosource/zato-labs/blob/HEAD/ide_deploy/ide_deploy.py>`_.

2. From the web administration UI, visit **Services -> List Services**, then
   select the **Upload services** button.

3. Supply ``ide_deploy.py`` downloaded in step 1. The UI should report
   "Service package uploaded, check the server logs for details".


Create the authentication credential
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

1. Visit **Security -> HTTP Basic Auth**, then select **Create a new HTTP
   Basic Auth definition**:

   * **Name**: ``ide_publisher``
   * **Username**: ``ide_publisher``
   * **Realm**: ``zato``

2. Select **Change password** beside the ``ide_publisher`` credential, and set
   a password.


Create the channel
~~~~~~~~~~~~~~~~~~

Visit **Connections -> Channels -> Plain HTTP**, then select **Create a new
Plain HTTP Channel**:

* **Name**: ``ide_deploy.create``
* **URL path**: ``/zato/ide-deploy``
* **Data format**: JSON
* **Service**: ``ide-deploy.create``
* **Security definition**: ``HTTP Basic Auth/ide_publisher``
